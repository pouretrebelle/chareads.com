"use strict";(self.webpackChunkchareads_com=self.webpackChunkchareads_com||[]).push([[221],{5953:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(7294);var o="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;const a="undefined"!=typeof window;var i=(e,t,n,r)=>{let i=null;const l=()=>{e((e=>a?(e.current||document.body).getBoundingClientRect().bottom-window.innerHeight:0)(r)),i=null};o((()=>{if(!a)return;const e=()=>{t?null===i&&(i=setTimeout(l,t)):l()};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),n||[])};const l="undefined"!=typeof window;var s=e=>{let{items:t,renderItem:n}=e;const o=(0,r.createRef)(),{0:a,1:s}=(0,r.useState)(24);return(0,r.useLayoutEffect)((()=>{s(24)}),[t.length]),i((e=>{e<400&&a<t.length&&s(a+8)}),300,[a,t.length],o),r.createElement(r.Fragment,null,t.slice(0,l?a:t.length).map(n),r.createElement("span",{ref:o}))}},983:function(e,t,n){var r,o,a=n(1880),i=n(7294),l=n(2788),s=n(1883),c=n(196),d=n(2552),u=n(8180),m=n(3662),g=n(1106);const p=(0,l.default)((e=>{let{$big:t,...n}=e;return i.createElement(s.rU,n)})).withConfig({displayName:"BookCard__StyledBookCard",componentId:"sc-1iijhnp-0"})(["display:flex;flex-direction:column;justify-content:space-around;align-items:center;margin:0;height:100%;position:relative;overflow:hidden;background:",";border-radius:",";outline:0 !important;--perspective:800px;--book-pages-color:#afbdbb;","}"],m.r$.BACKGROUND_DARK,m.n_.S,(e=>{let{$big:t}=e;return t&&g.tD.m(r||(r=(0,a.Z)(["\n    --perspective: 1600px;\n    "])))})),f=l.default.figure.withConfig({displayName:"BookCard__StyledImgWrapper",componentId:"sc-1iijhnp-1"})(["max-width:100%;height:150px;margin:0.5em;background:var(--book-pages-color);box-shadow:0 0.2em 0.5em rgba(0,0,0,0.1);transform:scale(var(--book-scale));*::selection{background:var(--primary-color);color:",";}",""],m.r$.BACKGROUND_LIGHT,g.tD.m(o||(o=(0,a.Z)(["\n    &[data-big='true'] {\n      height: 350px;\n    }\n  "])))),h=(0,l.default)(c.C).withConfig({displayName:"BookCard__StyledImg",componentId:"sc-1iijhnp-2"})(["height:100%;vertical-align:bottom;transition:transform 0.3s ease-out;transform-origin:0 50%;box-shadow:0 0 0.3em rgba(0,0,0,0.05);transform:perspective(var(--perspective)) rotateY(0);img{height:100%;width:auto;}a:hover &,a:focus &{transition:transform 0.15s ease-out;transform:perspective(var(--perspective)) rotateY(-30deg);}a:active &{transition:transform 0.5s ease-out;transform:perspective(var(--perspective)) rotateY(-80deg);}"]),b=l.default.figcaption.withConfig({displayName:"BookCard__StyledAccessibilityTitle",componentId:"sc-1iijhnp-3"})(["position:absolute;top:0;left:0;width:100%;height:100%;text-align:center;font-size:",";color:transparent;padding:0.5em;display:flex;place-items:center;"],m.nb.SIZE.S),v=l.default.div.withConfig({displayName:"BookCard__StyledMeta",componentId:"sc-1iijhnp-4"})(["margin:0 0 1em;font-size:",";line-height:1;text-align:center;& > * + *{margin-top:0.25em;}"],m.nb.SIZE.XS),y=l.default.button.withConfig({displayName:"BookCard__StyledVideoLink",componentId:"sc-1iijhnp-5"})(["display:inline-block;font-weight:",";padding:0.25em 0.5em;transition:transform 150ms linear;&:hover{transform:translate(-0.1em,0);}&::selection{background:transparent;}"],m.nb.WEIGHT.BOLD);t.Z=e=>{let{book:t,featured:n,big:r,hideDetails:o,className:a}=e;return i.createElement(p,{to:t.slug,$big:r,style:{background:o?t.image.childImageColors.darkVibrant:n&&t.image.childImageColors.lightMuted,color:t.image.childImageColors.darkVibrant,"--primary-color":t.image.childImageColors.vibrant,"--secondary-color":t.image.childImageColors.darkVibrant,"--book-pages-color":n&&t.image.childImageColors.muted,"--book-scale":((t.bookHeight||198)/220).toFixed(2)},className:a,title:t.title+" by "+t.author},i.createElement(f,{"data-big":r},i.createElement(h,{image:t.image,background:c.Z.Muted}),i.createElement(b,null,i.createElement("span",null,t.title," by ",t.author))),!o&&(t.rating7||t.video)&&i.createElement(v,null,t.video&&i.createElement(y,{onClick:e=>{e.preventDefault(),(0,s.c4)(t.video.slug)}},"Video review",i.createElement(u.Z,null)),t.rating7&&i.createElement(d.Z,{of7:t.rating7})))}},4465:function(e,t,n){n.d(t,{Vt:function(){return r},a:function(){return o}});const r=e=>e.replace(/<\/[^>]+><[^>/]+>/gm," ").replace(/<\/?[^>]+>/g,"").replace(/ +/gm," ").trim(),o=e=>e.sort(((e,t)=>e<t?-1:e>t?1:0))},4931:function(e,t,n){n.d(t,{A:function(){return r}});const r=e=>e.edges.map((e=>e.node))},3514:function(e,t,n){n.d(t,{Oq:function(){return i},i3:function(){return c},qg:function(){return s},up:function(){return l}});var r=n(5785),o=n(4465);const a={type:"Type",genre:"Genre",sub:"Subject"},i=e=>{const t=e.split("-");return[t[0],t.slice(1).join("-"),e]},l=e=>{const t=e.map(i).reduce(((e,t)=>{let[n,r,o]=t;const a={name:r,unprefixed:o};return e[n]?e[n].push(a):e[n]=[a],e}),{});return Object.keys(a).filter((e=>t[e])).map((e=>({prefix:a[e],values:t[e]})))},s=(e,t)=>{const n=[];e.forEach((e=>n.push.apply(n,(0,r.Z)(e.tags))));const a=(0,r.Z)(new Set(n)),i=(0,o.a)(a);return t?i.filter((e=>e.startsWith(t+"-"))).map((e=>e.slice(t.length+1))):i},c=(e,t,n,r,o)=>{let a=e;return t&&"type"!==o&&(a=a.filter((e=>e.tags.includes("type-"+t)))),n&&"genre"!==o&&(a=a.filter((e=>e.tags.includes("genre-"+n)))),r&&"sub"!==o&&(a=a.filter((e=>e.tags.includes("sub-"+r)))),a}},9513:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var r=n(1880),o=n(7294),a=n(2788),i=n(4931),l=n(9249),s=n(3662),c=n(1106),d=n(3907),u=n(983),m=n(2042),g=n(7700),p=n(5953),f=n(3514);var h=(e,t)=>{const n=(0,o.useRef)(),r=e=>{let{clientX:r,clientY:o}=e;if(!n||!n.current)return;const{top:a,bottom:i,left:l,right:s}=n.current.getBoundingClientRect();(r<l||r>s||o<a||o>i)&&t()};return(0,o.useEffect)((()=>(e?window.addEventListener("click",r):window.removeEventListener("click",r),()=>{e&&window.removeEventListener("click",r)})),[e]),[n]};const b=a.default.span.withConfig({displayName:"FilterTrigger__StyledWrapper",componentId:"sc-m0dtlq-0"})(["position:relative;display:inline-block;"]),v=a.default.ol.withConfig({displayName:"FilterTrigger__StyledOptions",componentId:"sc-m0dtlq-1"})(["position:absolute;background:",";border-radius:",";border:1px solid ",";box-shadow:0 2px 8px ","20;min-width:11em;max-height:20.5em;top:-0.25rem;left:-0.5rem;margin:-1px;padding:0 0 0.25rem;z-index:1;line-height:1.25;overflow:auto;::-webkit-scrollbar{width:0.25em;border-radius:0 "," "," 0;}::-webkit-scrollbar-thumb{background:",";}"],s.r$.BACKGROUND_LIGHT,s.n_.M,s.r$.BACKGROUND_DARK,s.r$.SHADOW,s.n_.S,s.n_.S,s.r$.BACKGROUND_DARK),y=a.default.li.withConfig({displayName:"FilterTrigger__StyledOption",componentId:"sc-m0dtlq-2"})(["padding:0.125rem 0.5rem;font-size:",";cursor:pointer;user-select:none;"," &:first-child{",";font-style:italic;font-size:",";padding:0.25rem 0.5rem;line-height:1.5;}&:nth-child(n + 2):hover{background:","10;}"],s.nb.SIZE.S,(e=>{let{$default:t}=e;return t&&"\n    "+s.oJ+";\n  "}),s.oJ,s.nb.SIZE.M,s.r$.SHADOW),k=a.default.span.withConfig({displayName:"FilterTrigger__StyledTrigger",componentId:"sc-m0dtlq-3"})(["",";font-style:italic;cursor:pointer;user-select:none;"],s.oJ);var E=e=>{let{value:t,defaultLabel:n,options:r,onChange:a}=e;const{0:i,1:l}=(0,o.useState)(!1),[s]=h(i,(()=>l(!1))),c=t||n,d=e=>(l(!1),a(e||void 0)),u=t?r.filter((e=>e!==t)):r;return u&&0!==u.length?o.createElement(b,{ref:s},o.createElement(k,{onClick:()=>l(!i)},c),i&&o.createElement(v,null,o.createElement(y,{onClick:()=>l(!1)},c),n!==c&&o.createElement(y,{onClick:()=>d(void 0),$default:!0},n),u.map((e=>o.createElement(y,{key:e,onClick:()=>d(e)},e))))):o.createElement(o.Fragment,null,t||n)},w=n(834),C=n(7896),_=n(129),S=n.n(_);var I,x=(e,t,n)=>{const{0:r,1:a}=(0,o.useState)(!0),i=S().parse(t,{ignoreQueryPrefix:!0,comma:!0});return(0,o.useEffect)((()=>{n.forEach((e=>{let{setter:t,key:n}=e;t(i[n])})),a(!1)}),[]),(0,o.useEffect)((()=>{n.forEach((e=>{let{key:t,value:n,setter:r}=e;i[t]!==n&&r(i[t])}))}),[t]),(0,o.useEffect)((()=>{if(!r){const r={};n.forEach((e=>{let{key:t,value:n}=e;r[t]=n}));const o=S().stringify(r,{addQueryPrefix:!0,arrayFormat:"comma",encode:!1});o!==t&&(0,C.navigate)(""+e+o)}}),n.map((e=>{let{value:t}=e;return t}))),[r]};const B=(0,a.default)(g.Z).withConfig({displayName:"BookListPage__StyledDetails",componentId:"sc-1gunfte-0"})(["background:",";padding:1em;"],s.r$.BACKGROUND_LIGHT),Z=(0,a.default)(g.Z).withConfig({displayName:"BookListPage__StyledBook",componentId:"sc-1gunfte-1"})(["",""],(e=>{let{big:t}=e;return c.tD.m(I||(I=(0,r.Z)(["\n    font-size: ",";\n  "])),t?"1.25em":s.nb.SIZE.S)})),L=(0,a.default)(d.Z).withConfig({displayName:"BookListPage__StyledClearFilterButton",componentId:"sc-1gunfte-2"})(["font-size:0.75em;"]);var N=e=>{let{data:{bookData:t},location:n}=e;const r=(0,i.A)(t),{0:a,1:s}=(0,o.useState)(void 0),{0:c,1:d}=(0,o.useState)(void 0),{0:g,1:h}=(0,o.useState)(void 0),[b]=x(w.Z.BOOKS,n.search,[{key:"type",value:a,setter:s},{key:"genre",value:c,setter:d},{key:"sub",value:g,setter:h}]),v=(0,f.i3)(r,a,c,g),y=a||c||g,k=e=>{const t=y?(0,f.i3)(r,a,c,g,e):r;return(0,f.qg)(t,e)};return o.createElement(l.Z,{location:n,navOpenOnDesktop:!0,navTitle:"Book reviews",title:"Book reviews"},(!b||""===n.search)&&o.createElement(m.Z,{as:"ol",full:!0},o.createElement(B,{span:2,spanFromM:6,spanFromL:4},o.createElement("p",null,"Showing ",v.length," ",1===v.length?"book":"books",o.createElement("br",null),o.createElement(E,{value:a,defaultLabel:"fiction and non-fiction",options:k("type"),trackingCategory:"type",onChange:s}),o.createElement("br",null),"in ",o.createElement(E,{value:c,defaultLabel:"any genre",options:k("genre"),trackingCategory:"genre",onChange:d}),o.createElement("br",null),"about ",o.createElement(E,{value:g,defaultLabel:"any subject",options:k("sub"),trackingCategory:"sub",onChange:h}),y&&o.createElement(o.Fragment,null,o.createElement("br",null),o.createElement(L,{as:"button",onClick:()=>{s(void 0),d(void 0),h(void 0)}},"clear filter")))),o.createElement(p.Z,{items:v,renderItem:e=>{const t=e.rating7>=6;return o.createElement(Z,{big:t,as:"li",key:e.id,span:1,spanFromM:t?6:3,spanFromL:t?4:2,spanRowsFromM:t?2:1},o.createElement(u.Z,{book:e,featured:t,big:t}))}})))}}}]);
//# sourceMappingURL=component---src-views-book-list-page-index-tsx-b52c59b6944ea70145d0.js.map